<html>
<meta charset="UTF-8">
<head>sorz</head>
<body>

<div>
    <ul>
        <li data-sorz-tab="new" data-sorz-order="desc"><a href="#">new</a></li>
        <!-- "tab" には カンマ区切りで、実施したいソートを指定、数が一致するように、"sort" にも並び順を設定 -->
        <li data-sorz-tab="cat,new" data-sorz-order="asc,desc"><a href="#">category</a></li>
    </ul>

    <table>
        <tr>
            <td>category</td><td>contents</td><td>release</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="a" data-sorz-rank="20"></td><td>A1</td><td data-sorz-sort="new">2020/06/01</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="b" data-sorz-rank="10"></td><td>B1</td><td data-sorz-sort="new">2020/02/01</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="a" data-sorz-rank="20"></td><td>A2</td><td data-sorz-sort="new">2020/03/01</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="b" data-sorz-rank="10"></td><td>B2</td><td data-sorz-sort="new">2020/02/11</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="c" data-sorz-rank="30"></td><td>C1</td><td data-sorz-sort="new">2020/05/03</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="b" data-sorz-rank="10"></td><td>B3</td><td data-sorz-sort="new">2020/08/01</td>
        </tr>
        <tr data-sorz="row">
            <td data-sorz-sort="cat"><img src="dummy.png" alt="a" data-sorz-rank="20"></td><td>A3</td><td data-sorz-sort="new">2020/07/23</td>
        </tr>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    !function(win, $){

    	win.addEventListener('DOMContentLoaded', function() {

    		var tabs = $('[data-sorz-tab]');

		    tabs.on('click', function(e) {
			    e.preventDefault();

            	if ($(this).hasClass('active')) return;

			    tabs.removeClass('active');

			    $(this).addClass('active');

                var sortNames = ($(this).attr('data-sorz-tab') || '').split(',').filter(function(v){ return !!v; }).reverse();
			    var orders = ($(this).attr('data-sorz-order') || '').split(',').filter(function(v){ return !!v; }).reverse();

			    sortNames.forEach(function(sortName, index) {
                    var order = orders[index] || '';

				    var sortTargets = $('[data-sorz-sort="' + sortName + '"]').closest('[data-sorz="row"]');

				    sortTargets.sort(function(a, b) {
					    var aVal = $(a).find('[data-sorz-sort="' + sortName + '"]').find('[data-sorz-rank]').attr('data-sorz-rank');
					    if (!aVal) aVal = $(a).find('[data-sorz-sort="' + sortName + '"]').text();
					    var bVal = $(b).find('[data-sorz-sort="' + sortName + '"]').find('[data-sorz-rank]').attr('data-sorz-rank');
					    if (!bVal) bVal = $(b).find('[data-sorz-sort="' + sortName + '"]').text();

					    var judge = order.toLocaleLowerCase() === 'asc' ? aVal > bVal : aVal < bVal;
					    return judge ? 1 : -1;
				    });

				    sortTargets.parent().find('[data-sorz]').remove().end().append(sortTargets);
                });
            });
        });
    }(window, jQuery);
</script>
</body>
<html>